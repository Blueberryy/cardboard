version: 1.0.{build}
image:
- Ubuntu1804
- Visual Studio 2019
configuration:
- Debug
- Release
platform:
- x86
- x64
shallow_clone: true
build:
  verbosity: normal
after_build:
- cmd: '"C:\Program Files (x86)\NSIS\makensis.exe" src\vcpp\cardboard.nsi'
for:
-
  matrix:
    only:
      - image: Visual Studio 2019

  artifacts:
  - path: src/vcpp/crimson_alpha_win_setup.exe
    name: Install
-
  matrix:
    only:
      - image: Ubuntu1804

  build_script:
  - sh: cd src && make && make install
